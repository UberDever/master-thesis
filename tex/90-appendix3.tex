\chapter{Пример 2 -- ограничения и подстановки}
\label{cha:appendix3}

\begin{minted}[linenos=true, breaklines]{js}
const constraints = [
    {
        "identifier": {
            "name": "OS"
        },
        "scope": {
            "index": 0,
            "type": "scope"
        },
        "usage": "declaration"
    },
    {
        "declaration": {
            "name": "OS"
        },
        "scope": {
            "index": 1,
            "type": "scope"
        }
    },
    {
        "identifier": {
            "name": "Filesystem"
        },
        "scope": {
            "index": 1,
            "type": "scope"
        },
        "usage": "declaration"
    },
    {
        "declaration": {
            "name": "Filesystem"
        },
        "scope": {
            "index": 2,
            "type": "scope"
        }
    },
    {
        "from": {
            "index": 2,
            "type": "scope"
        },
        "to": {
            "index": 1,
            "type": "scope"
        },
        "label": "parent"
    },
    {
        "identifier": {
            "name": "build.sh",
            "source": {
                "uri": "Example 2/build.sh"
            }
        },
        "scope": {
            "index": 2,
            "type": "scope"
        },
        "usage": "declaration"
    },
    {
        "declaration": {
            "name": "build.sh",
            "source": {
                "uri": "Example 2/build.sh"
            }
        },
        "scope": {
            "index": 3,
            "type": "scope"
        }
    },
    {
        "identifier": {
            "name": "lib.cpp",
            "source": {
                "uri": "Example 2/build.sh",
                "range": {
                    "start": {
                        "line": 2,
                        "character": 13
                    },
                    "end": {
                        "line": 2,
                        "character": 20
                    }
                },
                "language": "Shell"
            }
        },
        "scope": {
            "index": 3,
            "type": "scope"
        },
        "usage": "reference"
    },
    {
        "declaration": {
            "name": "lib.cpp",
            "source": {
                "uri": "Example 2/build.sh",
                "range": {
                    "start": {
                        "line": 2,
                        "character": 13
                    },
                    "end": {
                        "line": 2,
                        "character": 20
                    }
                },
                "language": "Shell"
            }
        },
        "type": {
            "index": 4,
            "type": "tau"
        }
    },
    {
        "lhs": {
            "index": 4,
            "type": "tau"
        },
        "rhs": "URI"
    },
    {
        "reference": {
            "name": "lib.cpp",
            "source": {
                "uri": "Example 2/build.sh",
                "range": {
                    "start": {
                        "line": 2,
                        "character": 13
                    },
                    "end": {
                        "line": 2,
                        "character": 20
                    }
                },
                "language": "Shell"
            }
        },
        "declaration": {
            "index": 5,
            "type": "delta"
        }
    },
    {
        "declaration": {
            "index": 5,
            "type": "delta"
        },
        "scope": {
            "index": 6,
            "type": "sigma"
        }
    },
    {
        "identifier": {
            "name": "lib_dir/lib.so",
            "source": {
                "uri": "Example 2/build.sh",
                "range": {
                    "start": {
                        "line": 9,
                        "character": 4
                    },
                    "end": {
                        "line": 9,
                        "character": 10
                    }
                },
                "language": "Shell"
            }
        },
        "scope": {
            "index": 3,
            "type": "scope"
        },
        "usage": "declaration"
    },
    {
        "declaration": {
            "name": "lib_dir/lib.so",
            "source": {
                "uri": "Example 2/build.sh",
                "range": {
                    "start": {
                        "line": 9,
                        "character": 4
                    },
                    "end": {
                        "line": 9,
                        "character": 10
                    }
                },
                "language": "Shell"
            }
        },
        "type": {
            "index": 7,
            "type": "tau"
        }
    },
    {
        "lhs": {
            "index": 7,
            "type": "tau"
        },
        "rhs": "URI"
    },
    {
        "declaration": {
            "name": "lib_dir/lib.so",
            "source": {
                "uri": "Example 2/build.sh",
                "range": {
                    "start": {
                        "line": 9,
                        "character": 4
                    },
                    "end": {
                        "line": 9,
                        "character": 10
                    }
                },
                "language": "Shell"
            }
        },
        "scope": {
            "index": 9,
            "type": "scope"
        }
    },
    {
        "from": {
            "index": 6,
            "type": "sigma"
        },
        "to": {
            "index": 9,
            "type": "scope"
        },
        "label": "import"
    },
    {
        "identifier": {
            "name": "lib.cpp",
            "source": {
                "uri": "Example 2/lib.cpp"
            }
        },
        "scope": {
            "index": 2,
            "type": "scope"
        },
        "usage": "declaration"
    },
    {
        "declaration": {
            "name": "lib.cpp",
            "source": {
                "uri": "Example 2/lib.cpp"
            }
        },
        "scope": {
            "index": 10,
            "type": "scope"
        }
    },
    {
        "identifier": {
            "name": "counter_new",
            "source": {
                "uri": "Example 2/lib.cpp",
                "range": {
                    "start": {
                        "line": 27,
                        "character": 14
                    },
                    "end": {
                        "line": 27,
                        "character": 25
                    }
                },
                "language": "C++"
            }
        },
        "scope": {
            "index": 10,
            "type": "scope"
        },
        "usage": "declaration"
    },
    {
        "declaration": {
            "name": "counter_new",
            "source": {
                "uri": "Example 2/lib.cpp",
                "range": {
                    "start": {
                        "line": 27,
                        "character": 14
                    },
                    "end": {
                        "line": 27,
                        "character": 25
                    }
                },
                "language": "C++"
            }
        },
        "type": {
            "index": 11,
            "type": "tau"
        }
    },
    {
        "lhs": {
            "index": 11,
            "type": "tau"
        },
        "rhs": {
            "name": "Function",
            "variance": [
                "-",
                "+"
            ],
            "args": [
                "Unit",
                {
                    "name": "Pointer",
                    "variance": [
                        "+"
                    ],
                    "args": [
                        "Counter"
                    ]
                }
            ]
        }
    },
    {
        "identifier": {
            "name": "counter_free",
            "source": {
                "uri": "Example 2/lib.cpp",
                "range": {
                    "start": {
                        "line": 32,
                        "character": 10
                    },
                    "end": {
                        "line": 32,
                        "character": 22
                    }
                },
                "language": "C++"
            }
        },
        "scope": {
            "index": 10,
            "type": "scope"
        },
        "usage": "declaration"
    },
    {
        "declaration": {
            "name": "counter_free",
            "source": {
                "uri": "Example 2/lib.cpp",
                "range": {
                    "start": {
                        "line": 32,
                        "character": 10
                    },
                    "end": {
                        "line": 32,
                        "character": 22
                    }
                },
                "language": "C++"
            }
        },
        "type": {
            "index": 12,
            "type": "tau"
        }
    },
    {
        "lhs": {
            "index": 12,
            "type": "tau"
        },
        "rhs": {
            "name": "Function",
            "variance": [
                "-",
                "+"
            ],
            "args": [
                {
                    "name": "Pointer",
                    "variance": [
                        "+"
                    ],
                    "args": [
                        "Counter"
                    ]
                },
                "Unit"
            ]
        }
    },
    {
        "identifier": {
            "name": "counter_get",
            "source": {
                "uri": "Example 2/lib.cpp",
                "range": {
                    "start": {
                        "line": 37,
                        "character": 9
                    },
                    "end": {
                        "line": 37,
                        "character": 20
                    }
                },
                "language": "C++"
            }
        },
        "scope": {
            "index": 10,
            "type": "scope"
        },
        "usage": "declaration"
    },
    {
        "declaration": {
            "name": "counter_get",
            "source": {
                "uri": "Example 2/lib.cpp",
                "range": {
                    "start": {
                        "line": 37,
                        "character": 9
                    },
                    "end": {
                        "line": 37,
                        "character": 20
                    }
                },
                "language": "C++"
            }
        },
        "type": {
            "index": 13,
            "type": "tau"
        }
    },
    {
        "lhs": {
            "index": 13,
            "type": "tau"
        },
        "rhs": {
            "name": "Function",
            "variance": [
                "-",
                "+"
            ],
            "args": [
                {
                    "name": "Pointer",
                    "variance": [
                        "+"
                    ],
                    "args": [
                        "Counter"
                    ]
                },
                "Integer"
            ]
        }
    },
    {
        "identifier": {
            "name": "counter_reset",
            "source": {
                "uri": "Example 2/lib.cpp",
                "range": {
                    "start": {
                        "line": 42,
                        "character": 10
                    },
                    "end": {
                        "line": 42,
                        "character": 23
                    }
                },
                "language": "C++"
            }
        },
        "scope": {
            "index": 10,
            "type": "scope"
        },
        "usage": "declaration"
    },
    {
        "declaration": {
            "name": "counter_reset",
            "source": {
                "uri": "Example 2/lib.cpp",
                "range": {
                    "start": {
                        "line": 42,
                        "character": 10
                    },
                    "end": {
                        "line": 42,
                        "character": 23
                    }
                },
                "language": "C++"
            }
        },
        "type": {
            "index": 14,
            "type": "tau"
        }
    },
    {
        "lhs": {
            "index": 14,
            "type": "tau"
        },
        "rhs": {
            "name": "Function",
            "variance": [
                "-",
                "+"
            ],
            "args": [
                {
                    "name": "Pointer",
                    "variance": [
                        "+"
                    ],
                    "args": [
                        "Counter"
                    ]
                },
                "Unit"
            ]
        }
    },
    {
        "identifier": {
            "name": "counter_inc",
            "source": {
                "uri": "Example 2/lib.cpp",
                "range": {
                    "start": {
                        "line": 47,
                        "character": 10
                    },
                    "end": {
                        "line": 47,
                        "character": 21
                    }
                },
                "language": "C++"
            }
        },
        "scope": {
            "index": 10,
            "type": "scope"
        },
        "usage": "declaration"
    },
    {
        "declaration": {
            "name": "counter_inc",
            "source": {
                "uri": "Example 2/lib.cpp",
                "range": {
                    "start": {
                        "line": 47,
                        "character": 10
                    },
                    "end": {
                        "line": 47,
                        "character": 21
                    }
                },
                "language": "C++"
            }
        },
        "type": {
            "index": 15,
            "type": "tau"
        }
    },
    {
        "lhs": {
            "index": 15,
            "type": "tau"
        },
        "rhs": {
            "name": "Function",
            "variance": [
                "-",
                "+"
            ],
            "args": [
                {
                    "name": "Pointer",
                    "variance": [
                        "+"
                    ],
                    "args": [
                        "Counter"
                    ]
                },
                "Unit"
            ]
        }
    },
    {
        "identifier": {
            "name": "test.py",
            "source": {
                "uri": "Example 2/test.py"
            }
        },
        "scope": {
            "index": 2,
            "type": "scope"
        },
        "usage": "declaration"
    },
    {
        "declaration": {
            "name": "test.py",
            "source": {
                "uri": "Example 2/test.py"
            }
        },
        "scope": {
            "index": 16,
            "type": "scope"
        }
    },
    {
        "identifier": {
            "name": "counter_new",
            "source": {
                "uri": "Example 2/test.py",
                "range": {
                    "start": {
                        "line": 35,
                        "character": 15
                    },
                    "end": {
                        "line": 35,
                        "character": 26
                    }
                },
                "language": "Python 3"
            }
        },
        "scope": {
            "index": 16,
            "type": "scope"
        },
        "usage": "reference"
    },
    {
        "declaration": {
            "name": "counter_new",
            "source": {
                "uri": "Example 2/test.py",
                "range": {
                    "start": {
                        "line": 35,
                        "character": 15
                    },
                    "end": {
                        "line": 35,
                        "character": 26
                    }
                },
                "language": "Python 3"
            }
        },
        "type": {
            "index": 17,
            "type": "tau"
        }
    },
    {
        "lhs": {
            "index": 17,
            "type": "tau"
        },
        "rhs": {
            "name": "Function",
            "variance": [
                "-",
                "+"
            ],
            "args": [
                "Unit",
                {
                    "name": "Pointer",
                    "variance": [
                        "+"
                    ],
                    "args": [
                        "Counter"
                    ]
                }
            ]
        }
    },
    {
        "identifier": {
            "name": "counter_inc",
            "source": {
                "uri": "Example 2/test.py",
                "range": {
                    "start": {
                        "line": 38,
                        "character": 9
                    },
                    "end": {
                        "line": 38,
                        "character": 9
                    }
                },
                "language": "Python 3"
            }
        },
        "scope": {
            "index": 16,
            "type": "scope"
        },
        "usage": "reference"
    },
    {
        "declaration": {
            "name": "counter_inc",
            "source": {
                "uri": "Example 2/test.py",
                "range": {
                    "start": {
                        "line": 38,
                        "character": 9
                    },
                    "end": {
                        "line": 38,
                        "character": 9
                    }
                },
                "language": "Python 3"
            }
        },
        "type": {
            "index": 18,
            "type": "tau"
        }
    },
    {
        "lhs": {
            "index": 18,
            "type": "tau"
        },
        "rhs": {
            "name": "Function",
            "variance": [
                "-",
                "+"
            ],
            "args": [
                {
                    "name": "Pointer",
                    "variance": [
                        "+"
                    ],
                    "args": [
                        "Counter"
                    ]
                },
                "Unit"
            ]
        }
    },
    {
        "identifier": {
            "name": "counter_get",
            "source": {
                "uri": "Example 2/test.py",
                "range": {
                    "start": {
                        "line": 41,
                        "character": 32
                    },
                    "end": {
                        "line": 41,
                        "character": 43
                    }
                },
                "language": "Python 3"
            }
        },
        "scope": {
            "index": 16,
            "type": "scope"
        },
        "usage": "reference"
    },
    {
        "declaration": {
            "name": "counter_get",
            "source": {
                "uri": "Example 2/test.py",
                "range": {
                    "start": {
                        "line": 41,
                        "character": 32
                    },
                    "end": {
                        "line": 41,
                        "character": 43
                    }
                },
                "language": "Python 3"
            }
        },
        "type": {
            "index": 19,
            "type": "tau"
        }
    },
    {
        "lhs": {
            "index": 19,
            "type": "tau"
        },
        "rhs": {
            "name": "Function",
            "variance": [
                "-",
                "+"
            ],
            "args": [
                {
                    "name": "Pointer",
                    "variance": [
                        "+"
                    ],
                    "args": [
                        "Counter"
                    ]
                },
                "Integer"
            ]
        }
    },
    {
        "identifier": {
            "name": "counter_reset",
            "source": {
                "uri": "Example 2/test.py",
                "range": {
                    "start": {
                        "line": 42,
                        "character": 9
                    },
                    "end": {
                        "line": 42,
                        "character": 22
                    }
                },
                "language": "Python 3"
            }
        },
        "scope": {
            "index": 16,
            "type": "scope"
        },
        "usage": "reference"
    },
    {
        "declaration": {
            "name": "counter_reset",
            "source": {
                "uri": "Example 2/test.py",
                "range": {
                    "start": {
                        "line": 42,
                        "character": 9
                    },
                    "end": {
                        "line": 42,
                        "character": 22
                    }
                },
                "language": "Python 3"
            }
        },
        "type": {
            "index": 20,
            "type": "tau"
        }
    },
    {
        "lhs": {
            "index": 20,
            "type": "tau"
        },
        "rhs": {
            "name": "Function",
            "variance": [
                "-",
                "+"
            ],
            "args": [
                {
                    "name": "Pointer",
                    "variance": [
                        "+"
                    ],
                    "args": [
                        "Counter"
                    ]
                },
                "Unit"
            ]
        }
    },
    {
        "identifier": {
            "name": "counter_free",
            "source": {
                "uri": "Example 2/test.py",
                "range": {
                    "start": {
                        "line": 49,
                        "character": 5
                    },
                    "end": {
                        "line": 49,
                        "character": 17
                    }
                },
                "language": "Python 3"
            }
        },
        "scope": {
            "index": 16,
            "type": "scope"
        },
        "usage": "reference"
    },
    {
        "declaration": {
            "name": "counter_free",
            "source": {
                "uri": "Example 2/test.py",
                "range": {
                    "start": {
                        "line": 49,
                        "character": 5
                    },
                    "end": {
                        "line": 49,
                        "character": 17
                    }
                },
                "language": "Python 3"
            }
        },
        "type": {
            "index": 21,
            "type": "tau"
        }
    },
    {
        "lhs": {
            "index": 21,
            "type": "tau"
        },
        "rhs": {
            "name": "Function",
            "variance": [
                "-",
                "+"
            ],
            "args": [
                {
                    "name": "Pointer",
                    "variance": [
                        "+"
                    ],
                    "args": [
                        "Counter"
                    ]
                },
                "Unit"
            ]
        }
    }
]
const substitution = [
    [
        {
            "index": 4,
            "type": "tau"
        },
        {
            "tag": "tau",
            "data": "URI"
        }
    ],
    [
        {
            "index": 7,
            "type": "tau"
        },
        {
            "tag": "tau",
            "data": "URI"
        }
    ],
    [
        {
            "index": 11,
            "type": "tau"
        },
        {
            "tag": "tau",
            "data": {
                "name": "Function",
                "variance": [
                    "-",
                    "+"
                ],
                "args": [
                    "Unit",
                    {
                        "name": "Pointer",
                        "variance": [
                            "+"
                        ],
                        "args": [
                            "Counter"
                        ]
                    }
                ]
            }
        }
    ],
    [
        {
            "index": 12,
            "type": "tau"
        },
        {
            "tag": "tau",
            "data": {
                "name": "Function",
                "variance": [
                    "-",
                    "+"
                ],
                "args": [
                    {
                        "name": "Pointer",
                        "variance": [
                            "+"
                        ],
                        "args": [
                            "Counter"
                        ]
                    },
                    "Unit"
                ]
            }
        }
    ],
    [
        {
            "index": 13,
            "type": "tau"
        },
        {
            "tag": "tau",
            "data": {
                "name": "Function",
                "variance": [
                    "-",
                    "+"
                ],
                "args": [
                    {
                        "name": "Pointer",
                        "variance": [
                            "+"
                        ],
                        "args": [
                            "Counter"
                        ]
                    },
                    "Integer"
                ]
            }
        }
    ],
    [
        {
            "index": 14,
            "type": "tau"
        },
        {
            "tag": "tau",
            "data": {
                "name": "Function",
                "variance": [
                    "-",
                    "+"
                ],
                "args": [
                    {
                        "name": "Pointer",
                        "variance": [
                            "+"
                        ],
                        "args": [
                            "Counter"
                        ]
                    },
                    "Unit"
                ]
            }
        }
    ],
    [
        {
            "index": 15,
            "type": "tau"
        },
        {
            "tag": "tau",
            "data": {
                "name": "Function",
                "variance": [
                    "-",
                    "+"
                ],
                "args": [
                    {
                        "name": "Pointer",
                        "variance": [
                            "+"
                        ],
                        "args": [
                            "Counter"
                        ]
                    },
                    "Unit"
                ]
            }
        }
    ],
    [
        {
            "index": 17,
            "type": "tau"
        },
        {
            "tag": "tau",
            "data": {
                "name": "Function",
                "variance": [
                    "-",
                    "+"
                ],
                "args": [
                    "Unit",
                    {
                        "name": "Pointer",
                        "variance": [
                            "+"
                        ],
                        "args": [
                            "Counter"
                        ]
                    }
                ]
            }
        }
    ],
    [
        {
            "index": 18,
            "type": "tau"
        },
        {
            "tag": "tau",
            "data": {
                "name": "Function",
                "variance": [
                    "-",
                    "+"
                ],
                "args": [
                    {
                        "name": "Pointer",
                        "variance": [
                            "+"
                        ],
                        "args": [
                            "Counter"
                        ]
                    },
                    "Unit"
                ]
            }
        }
    ],
    [
        {
            "index": 19,
            "type": "tau"
        },
        {
            "tag": "tau",
            "data": {
                "name": "Function",
                "variance": [
                    "-",
                    "+"
                ],
                "args": [
                    {
                        "name": "Pointer",
                        "variance": [
                            "+"
                        ],
                        "args": [
                            "Counter"
                        ]
                    },
                    "Integer"
                ]
            }
        }
    ],
    [
        {
            "index": 20,
            "type": "tau"
        },
        {
            "tag": "tau",
            "data": {
                "name": "Function",
                "variance": [
                    "-",
                    "+"
                ],
                "args": [
                    {
                        "name": "Pointer",
                        "variance": [
                            "+"
                        ],
                        "args": [
                            "Counter"
                        ]
                    },
                    "Unit"
                ]
            }
        }
    ],
    [
        {
            "index": 21,
            "type": "tau"
        },
        {
            "tag": "tau",
            "data": {
                "name": "Function",
                "variance": [
                    "-",
                    "+"
                ],
                "args": [
                    {
                        "name": "Pointer",
                        "variance": [
                            "+"
                        ],
                        "args": [
                            "Counter"
                        ]
                    },
                    "Unit"
                ]
            }
        }
    ],
    [
        {
            "index": 6,
            "type": "sigma"
        },
        {
            "tag": "sigma",
            "data": {
                "index": 10,
                "type": "scope"
            }
        }
    ],
    [
        {
            "index": 5,
            "type": "delta"
        },
        {
            "tag": "delta",
            "data": {
                "name": "lib.cpp",
                "source": {
                    "uri": "Example 2/lib.cpp"
                }
            }
        }
    ]
]
\end{minted}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "rpz"
%%% End: 
