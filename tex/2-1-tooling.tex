\chapter{Описание основных сценариев использования анализатора в сочетании с
инструментальными средствами программирования}

\section{Интеграция в различные инструментальные средства}

Анализатор, поставляющий информацию, описанную в \ref{constraints-desc} способен
поддерживать большое количество разнообразных инструментальных средств. Соответствующие
возможности анализатора отражены в таблице \ref{analysis-tooling}.

\begin{table}[h]
    \caption{Поддержка анализатором различных сценариев использования инструментальных средств}
    \resizebox{1 \textwidth}{!}{\begin{tabular}{|p{3cm}|p{3cm}|p{10cm}|}
    \hline Сценарий использования & Поддержка & Необходимая информация \\ 
    \hline Обнаружение багов & Частично & Идентификаторы; типы идентификаторов; значения идентификаторов; языкоспецифичная информация \\
    \hline Обнаружение уязвимостей & Отсутствует & Полная информация о системном окружении; знание уязвимостей различных библиотек и фреймворков \\
    \hline Соблюдение стиля кода и стандартов & Частично & Полный доступ к тексту и языкоспецифичному AST \\
    \hline Оценка сложности кода & Частично & Взаимосвязи различных идентификаторов, знание языкоспецифичных конструкций \\
    \hline Анализ зависимостей & Полностью & Идентификаторы и связи объявление-ссылка \\
    \hline
    \end{tabular}}\label{analysis-tooling}
\end{table}

Стоит подробнее описать каждый из сценариев для выявления возможностей предлагаемого метода.

Обнаружение багов может производиться на разных уровнях. Багом в данном случае может
считаться непреднамеренная функциональность (или её отсутствие), не отвечающая ожиданиям разработчика.
Соотвественно, в категорию багов, выявляемых анализатором могут потенциально входить:
неразрешенная ссылка, больше одной ссылки на определенный идентификатор, отсутствие ссылок
на определенный идентификатор. Баги иного рода находятся за рамками метода анализа, в первую
очередь из-за отсутствия возможности отслеживать значения идентификаторов, т.е.
отсутствие концепции \textit{переменной} или \textit{привязки}.

Обнаружение уязвимостей является довольно специфичным и сложным процессом, поэтому
количество сопровождаемой методом информации чаще всего будет недостаточным. Это связано
в первую очередь с отсутствием языкозависимой информации о типах или функциях, которые
могут содержать уязвимость. Соответственно, для реализации средств обнаружения уязвимостей в ПО
метод не подходит.

Соблюдение стиля кода и стандартов часто вовлекает идентификаторы. В контексте
анализа стиля назаваний переменных в проекте метода может быть достаточно. Однако, метод
не сопровождает никакой информации об исходном AST исходного языка, поэтому \textit{применение}
каких-либо рекомендаций по стилю может быть довольно сложным.

Оценка сложности кода вовлекает в себя использование различных метрик, например цикломатическая сложность
функции, связность классов или высота дерева наследования. Метод позволяет оценивать такие метрики как:
количество переменных в одной области видимости, связность на уровне модулей или файлов, количество
использований какого-либо определения. Оценка иных метрик сложна в первую очередь по причине отсутствия
языкоспецифичной информации.

Анализ зависимостей является важным процессом для обеспечения поддержки ПО. Рассматриваемый
метод анализа является в сущности способом построить граф объявлений и ссылок (или def-use граф), поэтому
для данного сценария использования он подходит очень хорошо. В сущности, метод позволяет обеспечивать
\textit{межъязыковой} анализ зависимостей, что может быть полезно в инструментах линтинга или
сбора статистики.

Таким образом, хоть поддержка различных инструментальных средств в контексте мультязыкового анализа и
ограничена, применимость метода всё еще довольно высока. Особенно это касается анализа зависимостей
в проекте. Основной особенностью метода является стирание языкоспецифичной информации, что
сильно уменьшает количество возможных сценариев использования, но в контексте некоторых сценариев использования
это не требуется. Одним из таких сценариев является поддержка разработчика в процессе кодирования.

\section{Реализация LSP как одного из сценариев интеграции метода}

В данной работе в качестве основного примера интеграции метода анализа было решено реализовать
анализатор, совместимый с LSP \Abbrev{LSP}{language server protocol --- протокол языкового сервера}
 \cite{LSP-spec}. LSP является протоколом, обобщающим языковые концепции для получения общих
методов взаимодействия с программой в контексте инструментальных средств разработки (в первую очередь IDE).

В возможные сценарии LSP (обобщенно) входит:
\begin{enumerate}[1)]
    \item найти объявление или определение идентификатора (типа или терма),
    \item определить иерархию вызовов,
    \item найти все ссылки на идентификатор,
    \item построить иерархию вызовов/наследования,
    \item подсветить идентификатор под курсором,
    \item автодополнение идентификатора под курсором,
    \item дать подсказку по проблеме под курсором (Inlay hint),
    \item остальные функции связанные с редактированием (подсветка, форматирование).
\end{enumerate}


В таблице \ref{lsp_functionality} представленно разделение приведенных сценариев на основе необходимой для анализа информации.
\begin{table}[H]
    \caption{Разделение сценариев по требуемой информации}\label{lsp_functionality}
    \begin{tabular}{|p{5.0cm}|p{5.0cm}|p{5.0cm}|}
    \hline Сценарий & Назначение & Необходимая информация \\
    \hline Поиск объявления или определения & Навигация по коду & Информация о областях видимости; информация о типах \\
    \hline Определение иерархии вызовов & Навигация по коду & Информация о областях видимости; информация о типах \\
    \hline Поиск ссылок на идентификатор & Навигация, редактирование & Информация о областях видимости; информация о типах \\
    \hline Подсветка символа & Редактирование & Информация о областях видимости \\
    \hline Автодополнение символа & Редактирование & Информация о областях видимости; информация о типах \\
    \hline Подсказка по проблеме & Редактирование, корректность & Специфическая для языка информация \\
    \hline
    \end{tabular}
\end{table}

Как видно из таблицы, даже при таком грубом разделении сценариев, описываемый метод способен поддержать подавляющее
большинство сценариев LSP. В теории, возможно создание \textit{универсального LSP анализатора}, позволяющего вовлекать не только
языкоспецифичный анализ, но и межъязыковой. Такой анализатор будет иметь возможность сопровождать приведенные сценарии использования
для любого количества языков и их комбинации, что может позволить сильно увеличить продуктивность разработчиков в отношении
разработки и поддержки ПО.

\clearpage